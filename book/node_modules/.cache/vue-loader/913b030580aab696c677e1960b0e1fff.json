{"remainingRequest":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaga/Desktop/文档/vue/Books/book/src/components/userinfo/useredit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gaga/Desktop/文档/vue/Books/book/src/components/userinfo/useredit.vue","mtime":1585805993046},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/cache-loader/dist/cjs.js","mtime":1573815120526},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/babel-loader/lib/index.js","mtime":1573815100829},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/cache-loader/dist/cjs.js","mtime":1573815120526},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/vue-loader/lib/index.js","mtime":1573815121359}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEJvb2ssZWRpdFVzZXJEYXRhIH0gZnJvbSAiQC9hcGkvaW5kZXgiOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB1c2VyRGF0YTogT2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0ZU9wdGlvbnM6IHsKICAgICAgICBkaXNhYmxlZERhdGUoZGF0ZSkgewogICAgICAgICAgcmV0dXJuIGRhdGUgJiYgZGF0ZS52YWx1ZU9mKCkgPiBEYXRlLm5vdygpOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWxsTWFqb3I6IFsKICAgICAgICAi5L+h5oGv5oqA5pyv5a2m6ZmiIiwKICAgICAgICAi5pWw5a2m56eR5a2m5a2m6ZmiIiwKICAgICAgICAi54mp55CG5a2m6ZmiIiwKICAgICAgICAi6Z+z5LmQ5a2m6ZmiIiwKICAgICAgICAi5aSW5Zu96K+t5a2m6ZmiIiwKICAgICAgICAi5L2T6IKy5a2m6ZmiIiwKICAgICAgICAi5paH5a2m6ZmiIiwKICAgICAgICAi5ZWG5a2m6ZmiIiwKICAgICAgICAi55Sf5ZG956eR5a2m5a2m6ZmiIiwKICAgICAgICAi5Y6G5Y+y5paH5YyW5a2m6ZmiIiwKICAgICAgICAi5paw6Ze75LiO5Lyg5pKt5a2m6ZmiIgogICAgICBdLAogICAgICBib29rTmFtZUxpc3Q6IFtdLAogICAgICBjdXJyZW50RGF0ZTogIiIsCiAgICAgIGRhdGVGbGFnOiB0cnVlCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuY3VycmVudERhdGUgPSB0aGlzLnVzZXJEYXRhLmRhdGU7CiAgfSwKICB3YXRjaDogewogICAgdXNlckRhdGEodmFsKSB7CiAgICAgIHRoaXMuZGF0ZUZsYWcgPSB0cnVlOwogICAgICB0aGlzLmN1cnJlbnREYXRlID0gdmFsLmRhdGU7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgZ2V0Qm9vaygpLnRoZW4ocmVzID0+IHsKICAgICAgcmVzLm1hcChpdGVtID0+IHRoaXMuYm9va05hbWVMaXN0LnB1c2goaXRlbS5uYW1lKSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYm9va05hbWVMaXN0KTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0ZShpKSB7CiAgICAgIHRoaXMuZGF0ZUZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy51c2VyRGF0YS5kYXRlID0gaTsKICAgIH0sCiAgICBlZGl0RGF0YSgpIHsKICAgICAgaWYgKHRoaXMuZGF0ZUZsYWcpIHsKICAgICAgICAvL+ayoeacieS/ruaUueaXpeacnwogICAgICAgIHRoaXMudXNlckRhdGEuZGF0ZSA9IHRoaXMuY3VycmVudERhdGU7CiAgICAgIH0KICAgICAgaWYodGhpcy51c2VyRGF0YS5zY2hvb2xOdW1iZXIubGVuZ3RoIT05KXsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLlrablj7fmoLzlvI/lupTkuLo55L2N5pWw5a2XISIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZih0aGlzLnVzZXJEYXRhLnBob25lTnVtYmVyLmxlbmd0aCE9MTEpewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuiBlOezu+aWueW8j+W6lOS4ujEx5L2N5pWw5a2XISIpOwogICAgICAgIHJldHVybjsKCiAgICAgIH0KICAgICAgZWRpdFVzZXJEYXRhKHRoaXMudXNlckRhdGEpLnRoZW4ocmVzPT57CiAgICAgICBpZiAocmVzLmNvZGUgPT0gMSkgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgIHRoaXMuJGVtaXQoInRvUGFyZW50Iik7CiAgICAgIH0pCiAgICB9LAogICAgY2xvc2VXaW4oKSB7CiAgICAgICB0aGlzLiRlbWl0KCJjbG9zZVdpbiIpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["useredit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"useredit.vue","sourceRoot":"src/components/userinfo","sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"item\">\n      借阅人:\n      <Input disabled  v-model=\"userData.name\" placeholder=\"输入书名...\" style=\"width: 300px\" />\n    </div>\n    <div class=\"item\">\n      学 号:\n      <Input disabled type=\"number\" v-model=\"userData.schoolNumber\" placeholder=\"输入学号...\" style=\"width: 300px\" />\n    </div>\n    <div class=\"item\">\n      联系方式:\n      <Input  type=\"number\" v-model=\"userData.phoneNumber\" placeholder=\"输入联系方式...\" style=\"width: 300px\" />\n    </div>\n    <div class=\"item\">\n      专 业:\n      <Select v-model=\"userData.major\" style=\"width:300px\">\n        <Option v-for=\"(item,index) in allMajor\" :value=\"item\" :key=\"index\">{{ item }}</Option>\n      </Select>\n    </div>\n    <div class=\"item\">\n      借阅书名:\n      <Select v-model=\"userData.bookName\" filterable style=\"width:300px\">\n        <Option v-for=\"(item,index) in bookNameList\" :value=\"item\" :key=\"index\">{{ item }}</Option>\n      </Select>\n\n    </div>\n\n    <div class=\"item\">\n      借阅时间:\n      <DatePicker\n        v-model=\"userData.date\"\n        type=\"date\"\n        placeholder=\"Select date\"\n        style=\"width: 300px\"\n        @on-change=\"getDate\"\n        :options=\"dateOptions\"\n      ></DatePicker>\n    </div>\n    <div class=\"item\">\n      <Button :style=\"{marginRight:'20px'}\" @click=\"closeWin\">取消</Button>\n      <Button type=\"primary\" @click=\"editData\">确定</Button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getBook,editUserData } from \"@/api/index\";\n\nexport default {\n  props: {\n    userData: Object\n  },\n  data() {\n    return {\n      dateOptions: {\n        disabledDate(date) {\n          return date && date.valueOf() > Date.now();\n        }\n      },\n      allMajor: [\n        \"信息技术学院\",\n        \"数学科学学院\",\n        \"物理学院\",\n        \"音乐学院\",\n        \"外国语学院\",\n        \"体育学院\",\n        \"文学院\",\n        \"商学院\",\n        \"生命科学学院\",\n        \"历史文化学院\",\n        \"新闻与传播学院\"\n      ],\n      bookNameList: [],\n      currentDate: \"\",\n      dateFlag: true\n    };\n  },\n  created() {\n    this.currentDate = this.userData.date;\n  },\n  watch: {\n    userData(val) {\n      this.dateFlag = true;\n      this.currentDate = val.date;\n    }\n  },\n  mounted() {\n    getBook().then(res => {\n      res.map(item => this.bookNameList.push(item.name));\n      // console.log(this.bookNameList);\n    });\n  },\n  methods: {\n    getDate(i) {\n      this.dateFlag = false;\n      this.userData.date = i;\n    },\n    editData() {\n      if (this.dateFlag) {\n        //没有修改日期\n        this.userData.date = this.currentDate;\n      }\n      if(this.userData.schoolNumber.length!=9){\n        this.$Message.error(\"学号格式应为9位数字!\");\n        return;\n      }\n      if(this.userData.phoneNumber.length!=11){\n        this.$Message.error(\"联系方式应为11位数字!\");\n        return;\n\n      }\n      editUserData(this.userData).then(res=>{\n       if (res.code == 1) {\n          this.$Message.success(res.msg);\n        } else {\n          this.$Message.error(res.msg);\n        }\n       this.$emit(\"toParent\");\n      })\n    },\n    closeWin() {\n       this.$emit(\"closeWin\");\n    }\n  }\n};\n</script>\n\n<style scoped>\n.main {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.main .item {\n  margin-bottom: 20px;\n}\n</style>"]}]}