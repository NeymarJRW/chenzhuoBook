{"remainingRequest":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaga/Desktop/文档/vue/Books/book/src/components/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/gaga/Desktop/文档/vue/Books/book/src/components/Index.vue","mtime":1585820612071},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/cache-loader/dist/cjs.js","mtime":1573815120526},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/babel-loader/lib/index.js","mtime":1573815100829},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/cache-loader/dist/cjs.js","mtime":1573815120526},{"path":"/Users/gaga/Desktop/文档/vue/Books/book/node_modules/vue-loader/lib/index.js","mtime":1573815121359}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCB7IGNoYW5nZVBhc3MgfSBmcm9tICJAL2FwaS9pbmRleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSW5kZXgiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VQYXNzRGF0YTogewogICAgICAgIG5hbWU6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXJOYW1lIikKICAgICAgICAgID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlck5hbWUiKQogICAgICAgICAgOiAiQWRtaW4iLAogICAgICAgIG9sZDogIiIsCiAgICAgICAgbmV3OiAiIgogICAgICB9LAogICAgICBjaGFuZ2VQYXNzRmxhZzogZmFsc2UsCiAgICAgIGlzQ29sbGFwc2VkOiBmYWxzZSwKICAgICAgbWVudUxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiYm9va2luZm8iLAogICAgICAgICAgdHlwZTogImlvcy1ib29rIiwKICAgICAgICAgIHRpdGxlOiAi5Lmm57GN5L+h5oGvIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInVzZXJpbmZvIiwKICAgICAgICAgIHR5cGU6ICJtZC1yZW9yZGVyIiwKICAgICAgICAgIHRpdGxlOiAi5YCf6ZiF5L+h5oGvIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInJvbGVpbmZvIiwKICAgICAgICAgIHR5cGU6ICJpb3MtY29udGFjdHMiLAogICAgICAgICAgdGl0bGU6ICLnrqHnkIblkZjkv6Hmga8iCiAgICAgICAgfQogICAgICBdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldFVzZXJuYW1lKCkgewogICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlck5hbWUiKQogICAgICAgID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlck5hbWUiKQogICAgICAgIDogIkFkbWluIjsKICAgIH0sCiAgICByb3RhdGVJY29uKCkgewogICAgICByZXR1cm4gWyJtZW51LWljb24iLCB0aGlzLmlzQ29sbGFwc2VkID8gInJvdGF0ZS1pY29uIiA6ICIiXTsKICAgIH0sCiAgICBtZW51aXRlbUNsYXNzZXMoKSB7CiAgICAgIHJldHVybiBbIm1lbnUtaXRlbSIsIHRoaXMuaXNDb2xsYXBzZWQgPyAiY29sbGFwc2VkLW1lbnUiIDogIiJdOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGlzQ29sbGFwc2VkKHZhbCkgewogICAgICBpZiAodmFsKSB7CiAgICAgICAgJCgiLnRpdGxlIHNwYW4iKS5odG1sKCIiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICQoIi50aXRsZSBzcGFuIikuaHRtbCgi5Zu+5Lmm5ZCO5Y+w566h55CGIik7CiAgICAgICAgfSwgMTAwKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVBhc3NGdW4oKSB7CiAgICAgIGZvciAodmFyIGsgaW4gdGhpcy5jaGFuZ2VQYXNzRGF0YSkgewogICAgICAgIGlmICh0aGlzLmNoYW5nZVBhc3NEYXRhW2tdLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLkv6Hmga/loavlhpnkuI3lrozmlbQhIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY2hhbmdlUGFzc0RhdGEpOwogICAgICBpZih0aGlzLmNoYW5nZVBhc3NEYXRhLm5ldyE9dGhpcy5jaGFuZ2VQYXNzRGF0YS5vbGQpewogICAgICBjaGFuZ2VQYXNzKHRoaXMuY2hhbmdlUGFzc0RhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMSkgewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibG9naW4iLCAwKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJsb2dpbiIgfSk7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5paw5a+G56CB5LiN6IO95LiO5pen5a+G56CB55u45ZCMISIpOwoKICAgICAgfQoKICAgIH0sCiAgICB0b3BhZ2UobmFtZSkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6IG5hbWUgfSk7CiAgICB9LAogICAgdXNlcnNlbGVjdChuYW1lKSB7CiAgICAgIHN3aXRjaCAobmFtZSkgewogICAgICAgIGNhc2UgIjEiOgogICAgICAgICAgY29uc29sZS5sb2coIuS/ruaUueWvhueggSIpOwogICAgICAgICAgdGhpcy5jaGFuZ2VQYXNzRmxhZyA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICIyIjoKICAgICAgICAgIGNvbnNvbGUubG9nKCLpgIDlh7rnmbvlvZUiKTsKICAgICAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICB0aXRsZTogIuaPkOekuiIsCiAgICAgICAgICAgIGNvbnRlbnQ6ICI8cD7noa7lrpropoHpgIDlh7rnmbvlvZXlkJc/PC9wPiIsCiAgICAgICAgICAgIG9uT2s6ICgpID0+IHsKICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJsb2dpbiIsIDApOwogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi6YCA5Ye655m75b2V5oiQ5YqfISIpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibG9naW4iIH0pOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5pbmZvKCJDbGlja2VkIGNhbmNlbCIpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNvbGxhcHNlZFNpZGVyKCkgewogICAgICB0aGlzLiRyZWZzLnNpZGUxLnRvZ2dsZUNvbGxhcHNlKCk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/components","sourcesContent":["\n<template>\n  <div class=\"layout\">\n    <Layout style=\"height:100%\">\n      <Sider\n        class=\"right\"\n        ref=\"side1\"\n        hide-trigger\n        collapsible\n        :collapsed-width=\"78\"\n        v-model=\"isCollapsed\"\n      >\n        <p class=\"title\">\n          <Icon type=\"ios-bookmarks\" />\n          <span>图书后台管理</span>\n        </p>\n        <!-- active-name=\"bookinfo\" -->\n        <Menu\n          active-name=\"bookinfo\"\n          theme=\"dark\"\n          width=\"200\"\n          :class=\"menuitemClasses\"\n          @on-select=\"topage\"\n        >\n          <MenuItem v-for=\"(item,index) in menuList\" :name=\"item.name\" :key=\"index\">\n            <Icon :type=\"item.type\"></Icon>\n            <span>{{item.title}}</span>\n          </MenuItem>\n        </Menu>\n      </Sider>\n      <Layout>\n        <Header :style=\"{padding: 0}\" class=\"layout-header-bar\">\n          <Icon\n            @click.native=\"collapsedSider\"\n            :class=\"rotateIcon\"\n            :style=\"{margin: '0 20px'}\"\n            type=\"md-menu\"\n            size=\"24\"\n          ></Icon>\n          <div class=\"user float\">\n            <Avatar\n              src=\"https://i.loli.net/2017/08/21/599a521472424.jpg\"\n              icon=\"ios-person\"\n              size=\"large\"\n            />\n            <Dropdown class=\"userinfo float\" @on-click=\"userselect\">\n              <a href=\"javascript:void(0)\" class=\"username\">\n                {{getUsername }}\n                <Icon type=\"ios-arrow-down\"></Icon>\n              </a>\n              <DropdownMenu slot=\"list\">\n                <DropdownItem name=\"1\">修改密码</DropdownItem>\n                <DropdownItem divided name=\"2\">退出登录</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          </div>\n        </Header>\n        <Content :style=\"{margin: '15px', background: '#fff', minHeight: '260px',overflow:'auto'}\">\n          <router-view />\n        </Content>\n      </Layout>\n    </Layout>\n    <Modal v-model=\"changePassFlag\" title=\"修改密码\">\n      <p slot=\"header\" style=\"text-align:center\">\n        <span>修改密码</span>\n      </p>\n      <div class=\"passView\">\n        <div class=\"item\" :style=\"{marginTop:'10px'}\">\n          旧密码 :\n          <Input\n            v-model=\"changePassData.old\"\n            placeholder=\"输入旧密码...\"\n            style=\"width: 300px;marginLeft:10px\"\n          />\n        </div>\n        <div class=\"item\">\n          新密码 :\n          <Input\n            v-model=\"changePassData.new\"\n            placeholder=\"输入新密码...\"\n            style=\"width: 300px;marginLeft:10px\"\n          />\n        </div>\n        <div class=\"item\">\n          <Button @click=\"changePassFlag=false\" :style=\"{marginRight:'15px'}\">取消</Button>\n\n          <Button type=\"primary\" @click=\"changePassFun\">确定</Button>\n        </div>\n      </div>\n      <div slot=\"footer\"></div>\n    </Modal>\n  </div>\n</template>\n<script>\nimport $ from \"jquery\";\nimport { changePass } from \"@/api/index\";\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      changePassData: {\n        name: sessionStorage.getItem(\"userName\")\n          ? sessionStorage.getItem(\"userName\")\n          : \"Admin\",\n        old: \"\",\n        new: \"\"\n      },\n      changePassFlag: false,\n      isCollapsed: false,\n      menuList: [\n        {\n          name: \"bookinfo\",\n          type: \"ios-book\",\n          title: \"书籍信息\"\n        },\n        {\n          name: \"userinfo\",\n          type: \"md-reorder\",\n          title: \"借阅信息\"\n        },\n        {\n          name: \"roleinfo\",\n          type: \"ios-contacts\",\n          title: \"管理员信息\"\n        }\n      ]\n    };\n  },\n  computed: {\n    getUsername() {\n      return sessionStorage.getItem(\"userName\")\n        ? sessionStorage.getItem(\"userName\")\n        : \"Admin\";\n    },\n    rotateIcon() {\n      return [\"menu-icon\", this.isCollapsed ? \"rotate-icon\" : \"\"];\n    },\n    menuitemClasses() {\n      return [\"menu-item\", this.isCollapsed ? \"collapsed-menu\" : \"\"];\n    }\n  },\n  watch: {\n    isCollapsed(val) {\n      if (val) {\n        $(\".title span\").html(\"\");\n      } else {\n        setTimeout(() => {\n          $(\".title span\").html(\"图书后台管理\");\n        }, 100);\n      }\n    }\n  },\n  mounted() {},\n  methods: {\n    changePassFun() {\n      for (var k in this.changePassData) {\n        if (this.changePassData[k].length == 0) {\n          this.$Message.error(\"信息填写不完整!\");\n          return;\n        }\n      }\n      console.log(this.changePassData);\n      if(this.changePassData.new!=this.changePassData.old){\n      changePass(this.changePassData).then(res => {\n        if (res.code == 1) {\n          this.$Message.success(res.msg);\n          sessionStorage.setItem(\"login\", 0);\n          setTimeout(() => {\n            this.$router.push({ name: \"login\" });\n          }, 500);\n        } else {\n          this.$Message.error(res.msg);\n        }\n      });\n      }else{\n          this.$Message.error(\"新密码不能与旧密码相同!\");\n\n      }\n\n    },\n    topage(name) {\n      this.$router.push({ name: name });\n    },\n    userselect(name) {\n      switch (name) {\n        case \"1\":\n          console.log(\"修改密码\");\n          this.changePassFlag = true;\n          break;\n        case \"2\":\n          console.log(\"退出登录\");\n          this.$Modal.confirm({\n            title: \"提示\",\n            content: \"<p>确定要退出登录吗?</p>\",\n            onOk: () => {\n              sessionStorage.setItem(\"login\", 0);\n              this.$Message.success(\"退出登录成功!\");\n              setTimeout(() => {\n                this.$router.push({ name: \"login\" });\n              }, 500);\n            },\n            onCancel: () => {\n              this.$Message.info(\"Clicked cancel\");\n            }\n          });\n      }\n    },\n    collapsedSider() {\n      this.$refs.side1.toggleCollapse();\n    }\n  }\n};\n</script>\n<style scoped>\n.layout {\n  border: 1px solid #d7dde4;\n  background: #f5f7f9;\n  position: relative;\n  border-radius: 4px;\n  overflow: hidden;\n  height: 100%;\n}\n.right {\n  font-size: 15px;\n}\n.title {\n  font-size: 25px;\n  color: #fff;\n  text-align: center;\n  margin: 5px 0;\n}\n.title span {\n  font-size: 20px;\n  vertical-align: text-top;\n  font-weight: bold;\n}\n.float {\n  float: right;\n}\n.user .userinfo {\n  margin: 0 20px;\n}\n.user .userinfo .username {\n  color: #333;\n}\n.layout-header-bar {\n  background: #fff;\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n}\n.layout-logo-left {\n  width: 90%;\n  height: 30px;\n  background: #5b6270;\n  border-radius: 3px;\n  margin: 15px auto;\n}\n.menu-icon {\n  transition: all 0.3s;\n}\n.rotate-icon {\n  transform: rotate(-90deg);\n}\n.menu-item span {\n  display: inline-block;\n  overflow: hidden;\n  width: 100px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: bottom;\n  transition: width 0.2s ease 0.2s;\n  /* font-size: 20px; */\n}\n.menu-item i {\n  transform: translateX(0px);\n  transition: font-size 0.2s ease, transform 0.2s ease;\n  vertical-align: middle;\n  font-size: 22px;\n}\n.collapsed-menu span {\n  width: 0px;\n  transition: width 0.2s ease;\n}\n.collapsed-menu i {\n  transform: translateX(5px);\n  transition: font-size 0.2s ease 0.2s, transform 0.2s ease 0.2s;\n  vertical-align: middle;\n  font-size: 18px;\n}\n.passView {\n  text-align: center;\n}\n.passView .item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 20px;\n}\n</style>"]}]}